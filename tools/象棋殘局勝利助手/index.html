<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>象棋殘局勝利助手</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@500;700&family=Chakra+Petch:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>象棋殘局勝利助手</h1>
        <div class="tagline">Endgame Planner for Xiangqi</div>
      </div>
      <div class="hint">先設局面，再按「建議一步」</div>
    </header>

    <section class="board-panel">
      <div class="board-wrap">
        <div class="board-area">
          <svg class="board-lines" viewBox="0 0 8 9" preserveAspectRatio="none" aria-hidden="true">
            <g stroke="rgba(31, 28, 25, 0.45)" stroke-width="0.03" fill="none">
              <!-- Horizontal lines -->
              <line x1="0" y1="0" x2="8" y2="0" />
              <line x1="0" y1="1" x2="8" y2="1" />
              <line x1="0" y1="2" x2="8" y2="2" />
              <line x1="0" y1="3" x2="8" y2="3" />
              <line x1="0" y1="4" x2="8" y2="4" />
              <line x1="0" y1="5" x2="8" y2="5" />
              <line x1="0" y1="6" x2="8" y2="6" />
              <line x1="0" y1="7" x2="8" y2="7" />
              <line x1="0" y1="8" x2="8" y2="8" />
              <line x1="0" y1="9" x2="8" y2="9" />

              <!-- Vertical lines broken by river -->
              <line x1="0" y1="0" x2="0" y2="4" />
              <line x1="0" y1="5" x2="0" y2="9" />
              <line x1="1" y1="0" x2="1" y2="4" />
              <line x1="1" y1="5" x2="1" y2="9" />
              <line x1="2" y1="0" x2="2" y2="4" />
              <line x1="2" y1="5" x2="2" y2="9" />
              <line x1="3" y1="0" x2="3" y2="4" />
              <line x1="3" y1="5" x2="3" y2="9" />
              <line x1="4" y1="0" x2="4" y2="4" />
              <line x1="4" y1="5" x2="4" y2="9" />
              <line x1="5" y1="0" x2="5" y2="4" />
              <line x1="5" y1="5" x2="5" y2="9" />
              <line x1="6" y1="0" x2="6" y2="4" />
              <line x1="6" y1="5" x2="6" y2="9" />
              <line x1="7" y1="0" x2="7" y2="4" />
              <line x1="7" y1="5" x2="7" y2="9" />
              <line x1="8" y1="0" x2="8" y2="4" />
              <line x1="8" y1="5" x2="8" y2="9" />

              <!-- Palace diagonals -->
              <line x1="3" y1="0" x2="5" y2="2" />
              <line x1="5" y1="0" x2="3" y2="2" />
              <line x1="3" y1="7" x2="5" y2="9" />
              <line x1="5" y1="7" x2="3" y2="9" />
            </g>
            <g fill="rgba(31, 28, 25, 0.55)" font-size="0.35" font-family="Noto Serif TC, serif">
              <text x="1.4" y="4.65">楚河</text>
              <text x="4.6" y="4.65">漢界</text>
            </g>
          </svg>
          <div id="marker-layer" class="marker-layer"></div>
          <svg id="piece-layer" class="piece-layer" viewBox="0 0 8 9" preserveAspectRatio="none" aria-hidden="true"></svg>
          <div id="board" class="board-grid"></div>
          <div id="hitmap" class="hitmap"></div>
        </div>
      </div>
    </section>

    <section class="controls">
      <div>
        <div class="section-title">局面設定</div>
        <div class="palette" id="palette"></div>
      </div>

      <div>
        <div class="section-title">操作</div>
        <div class="toolbar">
          <button id="clear">清空盤面</button>
          <button id="reset">標準開局</button>
          <button id="toggle-side">輪到：紅方</button>
          <button id="suggest">建議一步</button>
        </div>
        <div class="toolbar">
          <label>
            <select id="depth-select">
              <option value="2">深度 2</option>
              <option value="3" selected>深度 3</option>
              <option value="4">深度 4</option>
              <option value="5">深度 5</option>
            </select>
          </label>
        </div>
      </div>

      <div>
        <div class="section-title">勝利輔助</div>
        <div id="analysis" class="analysis">等待你設定局面。</div>
      </div>

      <div>
        <div class="section-title">計算進度</div>
        <div class="progress"><span id="progress-bar"></span></div>
        <div id="progress-text" class="progress-text">尚未開始</div>
      </div>

      <div class="field">
        <div class="section-title">盤面碼</div>
        <textarea id="boardcode" spellcheck="false"></textarea>
        <div class="toolbar">
          <button id="export">匯出盤面</button>
          <button id="import">匯入盤面</button>
        </div>
        <div class="hint">使用 10 行 / 分隔，紅方大寫、黑方小寫，空格用 .</div>
      </div>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>
